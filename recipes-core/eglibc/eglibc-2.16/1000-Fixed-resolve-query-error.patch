diff --git a/libc/resolv/res_query.c b/libc/resolv/res_query.c
index abccd4a..5579130 100644
--- a/libc/resolv/res_query.c
+++ b/libc/resolv/res_query.c
@@ -122,6 +122,7 @@ __libc_res_nquery(res_state statp,
 		  int *resplen2)
 {
 	HEADER *hp = (HEADER *) answer;
+	HEADER *hp2;
 	int n, use_malloc = 0;
 	u_int oflags = statp->_flags;
 
@@ -242,23 +243,20 @@ __libc_res_nquery(res_state statp,
 	/* We simplify the following tests by assigning HP to HP2.  It
 	   is easy to verify that this is the same as ignoring all
 	   tests of HP2.  */
-	HEADER *hp2 = answerp2 ? (HEADER *) *answerp2 : hp;
-
-	if (n < (int) sizeof (HEADER) && answerp2 != NULL
-	    && *resplen2 > (int) sizeof (HEADER))
-	  {
-	    /* Special case of partial answer.  */
-	    assert (hp != hp2);
-	    hp = hp2;
-	  }
-	else if (answerp2 != NULL && *resplen2 < (int) sizeof (HEADER)
-		 && n > (int) sizeof (HEADER))
-	  {
-	    /* Special case of partial answer.  */
-	    assert (hp != hp2);
-	    hp2 = hp;
-	  }
-
+	if (answerp2 == NULL || *resplen2 < (int) sizeof (HEADER))
+	{
+		hp2 = hp;
+	}
+	else
+	{
+		hp2 = (HEADER *) *answerp2;
+		if (n < (int) sizeof (HEADER))
+		{
+			hp = hp2;
+		}
+	}
+	assert((hp != NULL) && (hp2 != NULL));
+    
 	if ((hp->rcode != NOERROR || ntohs(hp->ancount) == 0)
 	    && (hp2->rcode != NOERROR || ntohs(hp2->ancount) == 0)) {
 #ifdef DEBUG
